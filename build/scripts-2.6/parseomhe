# An OMHE Microsyntax parser command line utility.
# Alan Viars, Videntity 2010

import os, sys
from  omhe.core.parseomhe import *

    
        
                
if __name__ == "__main__":
    """
    Accept a singe omhe string from the command line. Parse, then print
    the resulting dict.
    """
    try: 
        omhe_str=sys.argv[1]
    except(IndexError):
        print "You must supply an omhe message!"
        exit(1)
    
    print "Input omhe string is: %s" % (omhe_str) 
    
    try:
        """ Instantaiate an instance of the OMHE class"""
        
	o = OMHE()
        """Parse it if valid, otherwise raise the appropriate  error"""
        d=o.parse(omhe_str)
        """Print the dictonary"""
        print d
        
    except():
        print "An unexpected error occured. Here is the post-mortem:"
        print sys.exc_info()
